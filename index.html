<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>3D Viewer</title>
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <style>
      html, body { height: 100%; margin: 0; }
      model-viewer {
        width: 100%;
        height: 100vh;
        --interaction-prompt-display: none; /* hide hand/arrow hint */
        /* Helps touch devices scroll the page vertically */
        touch-action: pan-y;
      }
      model-viewer::part(default-progress-bar){ display:none; }
    </style>
  </head>
  <body>
    <model-viewer
      id="mv"
      src="./model10.glb"
      alt="3D model"
      interaction-prompt="none"
      shadow-intensity="1"
      poster="./poster.png"
      ar
      ar-modes="webxr scene-viewer quick-look">
    </model-viewer>

    <script type="module">
      const mv = document.getElementById('mv');

      // ---- Animation knobs ----
      const spinDegPerSec = 20;   // base spin speed (left/right)
      const bobAmpDeg     = 2;    // slight up-tilt bob
      const bobHz         = 0.20; // cycles per second
      const baseTiltDeg   = 70;   // average vertical tilt

      mv.addEventListener('load', () => {
        let last = performance.now();
        let { theta, radius } = mv.getCameraOrbit();

        function frame(now) {
          const dt = (now - last) / 1000;
          last = now;

          // continuous spin
          theta += (spinDegPerSec * Math.PI / 180) * dt;

          // gentle bob around base tilt
          const phase  = 2 * Math.PI * bobHz * (now / 1000);
          const phiDeg = baseTiltDeg - bobAmpDeg * (0.5 + 0.5 * Math.sin(phase));
          const phi    = phiDeg * Math.PI / 180;

          mv.cameraOrbit = `${theta}rad ${phi}rad ${radius}m`;
          requestAnimationFrame(frame);
        }

        requestAnimationFrame(frame);
      });
    </script>
  </body>
</html>
